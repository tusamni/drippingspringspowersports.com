---
import { siteConfig } from "@/config";

import Container from "@/components/layout/Container";
import Logo from "@/components/logos/Logo";
import LogoSquare from "@/components/logos/LogoSquare";
import MegaMenu from "@/components/navigation/MegaMenu";
---

<div x-data={`{ open : false }`} class="sticky top-0 z-50 shadow-2xl">
    <div x-show="open" class="fixed inset-0 bg-mongoose-950/70 z-10" x-cloak x-transition.opacity.duration.200ms></div>

    <div class="relative mx-auto z-50">
        <div class="bg-black py-4 md:py-8">
            <Container size="large">
                <div class="flex justify-between md:justify-normal lg:justify-between items-center bg-black">
                    <LogoSquare logoWidth="min-w-10 w-10" classes="lg:hidden" />
                    <Logo logoWidth="lg:w-50 xl:w-60" classes="hidden lg:block" />

                    <ul class="hidden md:flex md:flex-none md:ml-6 lg:ml-0 gap-6 xl:gap-8 font-medium items-center text-base lg:text-lg font-heading text-white antialiased">
                        <li class="w-fit flex items-center gap-1 hover:cursor-pointer" @mouseenter="open = !open">
                            <a href="/services/">Services</a>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="transition size-5" x-bind:class={`open ? 'rotate-180' : ''`}>
                                <path fill-rule="evenodd" d="M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z" clip-rule="evenodd"></path>
                            </svg>
                        </li>
                        <li class="hover:cursor-pointer"><a href="/rates/">Rates</a></li>
                        <li class="hover:cursor-pointer"><a href="/about/">About Us</a></li>
                        <li class="hover:cursor-pointer"><a href="/faq/">FAQ</a></li>
                    </ul>

                    <div class="flex flex-row md:w-full lg:w-auto justify-end items-center gap-3 md:gap-6">
                        <div class="hidden sm:block text-base lg:text-lg tracking-tight text-white antialiased font-medium">
                            <a href=`tel:${siteConfig.phone.base}`>{siteConfig.phone.formatted}</a>
                        </div>
                        <div class="sm:hidden">
                            <a href=`tel:${siteConfig.phone.base}` class="button button-primary button-inverse text-base!">Call</a>
                        </div>

                        <div>
                            <a href="/contact/" class="hidden! md:block! button button-success">Schedule</a>
                            <a href="/contact/" class="md:hidden! button button-success text-base!">Email</a>
                        </div>

                        <button class="hamburger-menu size-7 text-white md:hidden! hover:cursor-pointer" :class="{ 'is-active': open }" aria-expanded="false" aria-controls="menu" @click="open = !open">
                            <span class="line line--top"></span>
                            <span class="line line--middle"></span>
                            <span class="line line--bottom"></span>
                        </button>
                    </div>
                </div>
            </Container>
        </div>

        <MegaMenu />
    </div>
</div>

<style>
    .hamburger-menu {
        /* Ensure the button is big enough and centered */
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        width: 25px; /* Adjust size as needed */
        height: 30px; /* Adjust size as needed */
        padding: 0;
        border: none;
        background: transparent;
        cursor: pointer;
        z-index: 100; /* Ensure it's on top of content */
    }

    .line {
        display: block;
        height: 2px; /* Thickness of the lines */
        width: 100%;
        background: #fff; /* Line color */
        border-radius: 4px;
        /* Add a smooth transition to ALL transform properties */
        transition:
            transform 0.3s ease,
            opacity 0.3s ease;
    }

    .hamburger-menu.is-active .line--top {
        /* Move down to the center and rotate into the diagonal */
        transform: translateY(13px) rotate(45deg);
    }

    .hamburger-menu.is-active .line--middle {
        /* Fade out the middle line */
        opacity: 0;
    }

    .hamburger-menu.is-active .line--bottom {
        /* Move up to the center and rotate into the other diagonal */
        transform: translateY(-13px) rotate(-45deg);
    }
</style>
